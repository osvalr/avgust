/*
* Copyright «©» 2016, J.R Totem. All rights reserved.
*
* This file was generated by MybatisModelGenerator v.3.0.
* All changes made in this file will be lost if you recompile the source schema.
*
* [GeneratorCrud v.1.0] by JRaffo 
*/

/**
* @author  Javier Raffo
* @version 1.0
* @since   18/07/2016 00:27:51
*/

Ext.define('MyApp.controller.GestionarFacturaElectronica.FacturaDetalleWebQueryController', {
    extend: 'Ext.app.Controller',

    stores: ['GestionarFacturaElectronica.FacturaDetalleWebQueryStore'],

    models: ['GestionarFacturaElectronica.FacturaDetalleWebQueryModel'],

    views: ['GestionarFacturaElectronica.FacturaDetalleWebQueryList'],

    refs: [
    	{
            ref: 'FacturaDetalleWebQueryPanel',
            selector: 'panel'
        },
        {
            ref: 'FacturaDetalleWebQueryList',
            selector: 'FacturaDetalleWebQueryList'
        }
    ],

    init: function() {
    	Ext.getStore('GestionarFacturaElectronica.FacturaDetalleWebQueryStore').addListener('beforeload',this.setExtraParams,this);
    },
    setExtraParams: function(field, event, options) {
    	var store = Ext.getStore('GestionarFacturaElectronica.FacturaDetalleWebQueryStore');
    	var form = Ext.getCmp('form_crud_GestionarFacturaElectronica');
    	var ventas_key = form.getForm().findField('ventas_key');
        var values = {"ventas_key":ventas_key.getValue()};
    	store.getProxy().extraParams = values;
    }
});